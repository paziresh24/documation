import { OptionTable } from "components/table";

# هدایت کاربر در فرایند‌ها

وقتی ابزارک شما  افزونه‌ای را در فرایند کاربر نهایی (بیمار) فعال می‌کند، می‌توانید پس از انجام کار در ابزارک، کاربر را به ادامه فرایند هدایت کنید.

برای این کار باید از ماژول `flow` در Hamdast SDK استفاده کنید.

```js
window.hamdast.flow.dispatch("BOOKING.RECEIPT");
```

## متد dispatch

متد `dispatch` برای هدایت کاربر به مراحل مختلف فرایند استفاده می‌شود:

```js
window.hamdast.flow.dispatch(action);
```

<OptionTable
  options={[
    ["action", "String", "نوع عملیات هدایت (مثال: BOOKING.RECEIPT)"],
  ]}
/>

## انواع عملیات‌های هدایت

### هدایت به قبض نوبت بیمار

پس از انجام کار در ابزارک، کاربر را به صفحه قبض نوبت هدایت می‌کند:

```js
window.hamdast.flow.dispatch("BOOKING.RECEIPT");
```

### هدایت به چنل گفتگوی بیمار و پزشک در ویزیت آنلاین

پس از انجام کار در ابزارک، کاربر را به چنل گفتگوی ویزیت آنلاین هدایت می‌کند:

```js
window.hamdast.flow.dispatch("BOOKING.ONLINE_VISIT_CHANNEL");
```

## مثال‌های استفاده

##### مثال ۱: هدایت به قبض نوبت پس از تکمیل فرم

```js
// پس از تکمیل موفق فرم در ابزارک
async function handleFormSubmit(formData) {
  try {
    // ارسال داده‌ها به سرور
    await fetch('/api/submit', {
      method: 'POST',
      body: JSON.stringify(formData)
    });
    
    // هدایت کاربر به قبض نوبت
    window.hamdast.flow.dispatch("BOOKING.RECEIPT");
  } catch (error) {
    console.error('خطا در ارسال فرم:', error);
  }
}
```

##### مثال ۲: هدایت به چنل ویزیت آنلاین پس از انجام کار

```js
// پس از انجام عملیات خاص در ابزارک
function completeTask() {
  // انجام کارهای لازم
  // ...
  
  // هدایت به چنل گفتگوی ویزیت آنلاین
  window.hamdast.flow.dispatch("BOOKING.ONLINE_VISIT_CHANNEL");
}
```

## نکات مهم

- این متدها فقط وقتی ابزارک شما در فرایند کاربر نهایی (بیمار) فعال شده باشد کار می‌کنند.
- استفاده از `window.hamdast.flow.dispatch` کاملاً امن است و از سیاست‌های امنیتی iframe عبور می‌کند.
- پس از فراخوانی `dispatch`، کاربر به طور خودکار به مرحله بعدی فرایند هدایت می‌شود.
- در صورت نیاز به عملیات‌های هدایت بیشتر، با تیم همدست تماس بگیرید.

